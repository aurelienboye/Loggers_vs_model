"0",""
"0","# Retrieve the data already averaged across the different loggers put in each site"
"0","loggers <- sensors$per_shore %>%"
"0","  # Keep only the temperature data"
"0","  select(site_name = loc, temp) %>%"
"0","  unnest(temp) %>%"
"0","  # Retrieve the date from the timestamp"
"0","  mutate(date = as.Date(time))"
"0",""
"0","# Separate the T°C measured during emersion and immersion"
"0","#--------------------------------------------------------"
"0",""
"0","# Immersion periods"
"0","loggers_im <- loggers %>%"
"0","  filter(height > 0)"
"0",""
"0","# Emersion periods"
"0","loggers_em <- loggers %>%"
"0","  filter(height <= 0)"
"0",""
"0","# Check that we get all the data with these two filters "
"0","nrow(loggers) == (nrow(loggers_im) + nrow(loggers_em))"
"1","[1]"
"1"," TRUE"
"1","
"
"0","## Separate the T°C measured during emersion and immersion"
"0","##--------------------------------------------------------"
"0","#"
"0","#get_time <- function(x,tide = c(""lo"",""hi"")){"
"0","#  "
"0","#  #Get the date of the low or high tide"
"0","#  out <- x %>%"
"0","#    filter(!! sym(tide) == TRUE) %>%"
"0","#    pull(time)"
"0","#  "
"0","#  # Retrieve one hour before and after the low/high tide"
"0","#  out <- c(out - 1* 3600, out , out + 1* 3600)"
"0","#  "
"0","#  return(out)"
"0","#}"
"0","#"
"0","## Emersion periods"
"0","##-----------------"
"0","#"
"0","## Get the values one hour before and one hour after low tides"
"0","#loggers_em <- loggers %>%"
"0","#  group_by(site_name) %>%"
"0","#  nest() %>%"
"0","#  mutate(data = map(data, ~ .x %>% filter(time %in% get_time(.x, tide = ""lo"")))) %>%"
"0","#  unnest(data)"
"0","#"
"0","## Immersion periods"
"0","##-------------------"
"0","#"
"0","## Get the values one hour before and one hour after high tides"
"0","#loggers_im <- loggers %>%"
"0","#  group_by(site_name) %>%"
"0","#  nest() %>%"
"0","#  mutate(data = map(data, ~ .x %>% filter(time %in% get_time(.x, tide = ""hi"")))) %>%"
"0","#  unnest(data)"
"0","#"
"0","## Check number of obs"
"0","##--------------------"
"0","#nrow(loggers_em)"
"0","#nrow(loggers_im)"
"0",""
